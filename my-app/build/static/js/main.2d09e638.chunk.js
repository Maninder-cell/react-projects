(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{100:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),i=t(10),o=t.n(i),c=(t(81),t(14)),l=t(33),m=(t(82),t(20)),s=t.n(m);s.a.initializeApp({apiKey:"AIzaSyARH4S7fwa_62XfeceNWbrijeCjDeogr40",authDomain:"check-ef5f2.firebaseapp.com",databaseURL:"https://check-ef5f2.firebaseio.com",projectId:"check-ef5f2",storageBucket:"check-ef5f2.appspot.com",messagingSenderId:"887550449580",appId:"1:887550449580:web:86cc708487a8da7e620c09",measurementId:"G-Z6YFMF0MS2"});var u=s.a.auth(),d=s.a.firestore(),p=s.a.storage(),f=(s.a.database(),t(131)),b=t(143),g=t(136),E=t(101),h=t(134),v=t(142),y=t(137),j=Object(f.a)(function(e){var a;return{modal:{display:"flex",alignItems:"center",justifyContent:"center"},paper:(a={backgroundColor:e.palette.background.paper,boxShadow:e.shadows[5],padding:e.spacing(2,0,3),width:"30%",outline:"none"},Object(l.a)(a,e.breakpoints.down("sm"),{width:"60%"}),Object(l.a)(a,e.breakpoints.down("xs"),{width:"90%"}),a)}}),O=Object(f.a)(function(e){return{root:{"& > *":{margin:e.spacing(1)}}}});var w=function(e){var a=e.user,t=e.setuser,i=j(),o=O(),l=Object(n.useState)(!1),m=Object(c.a)(l,2),s=m[0],d=m[1],p=Object(n.useState)(!1),f=Object(c.a)(p,2),w=f[0],N=f[1],C=Object(n.useState)(!1),S=Object(c.a)(C,2),k=S[0],x=S[1],_=function(){d(!1)},B=function(){N(!1)},I=Object(n.useState)(),P=Object(c.a)(I,2),z=P[0],A=P[1],T=Object(n.useState)(),F=Object(c.a)(T,2),U=F[0],q=F[1],D=Object(n.useState)(),L=Object(c.a)(D,2),V=L[0],M=L[1];return Object(n.useEffect)(function(){var e=u.onAuthStateChanged(function(e){e&&!0===e.emailVerified?t(e):(u.signOut(),t(null))});return function(){e()}},[a,z]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"app_header"},r.a.createElement("h1",null,"Instagram"),r.a.createElement("div",{className:"app_auth"},a?r.a.createElement("div",{className:"status"},r.a.createElement("h4",{className:"username"},a.displayName),r.a.createElement(h.a,{variant:"contained",color:"primary",onClick:function(){return u.signOut()}},"Log Out")):r.a.createElement("div",{className:o.root},r.a.createElement(h.a,{variant:"contained",color:"primary",onClick:function(){d(!0)}},"Sign Up"),r.a.createElement(h.a,{variant:"contained",color:"primary",onClick:function(){N(!0)}},"Log In")),r.a.createElement("div",{className:"SignUp"},r.a.createElement(b.a,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",className:i.modal,open:s,onClose:_,closeAfterTransition:!0,BackdropComponent:g.a,BackdropProps:{timeout:500}},r.a.createElement(E.a,{in:s},r.a.createElement("div",{className:i.paper},k&&r.a.createElement(y.a,{style:{marginBottom:"15px",width:"100%",marginTop:"-18px"},color:"primary"}),r.a.createElement("div",{style:{padding:"2px 5% 2px 5%"}},r.a.createElement("h3",null,"Create New Account"),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),x(!0),u.createUserWithEmailAndPassword(U,V).catch(function(e){alert(e.message)}).then(function(e){e.user.updateProfile({displayName:z}),e.user.sendEmailVerification()}).then(function(){alert("We have send you an confirmation email to verify your account")}).catch(function(e){}).then(function(){x(!1),_()})},className:"form",autoComplete:"off"},r.a.createElement(v.a,{required:!0,value:z,onChange:function(e){return A(e.target.value)},margin:"normal",size:"medium",id:"standard-basic",label:"Username"}),r.a.createElement(v.a,{required:!0,value:U,onChange:function(e){return q(e.target.value)},margin:"normal",size:"medium",type:"email",id:"standard-basic",label:"Email"}),r.a.createElement(v.a,{required:!0,value:V,onChange:function(e){return M(e.target.value)},margin:"normal",size:"medium",type:"password",id:"standard-basic",label:"Password"}),r.a.createElement(h.a,{type:"submit",mt:"30px",color:"primary"},"Sign Up"))))))),r.a.createElement("div",{className:"login"},r.a.createElement(b.a,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",className:i.modal,open:w,onClose:B,closeAfterTransition:!0,BackdropComponent:g.a,BackdropProps:{timeout:500}},r.a.createElement(E.a,{in:w},r.a.createElement("div",{className:i.paper},k&&r.a.createElement(y.a,{style:{marginBottom:"15px",width:"100%",marginTop:"-18px"},color:"primary"}),r.a.createElement("div",{style:{padding:"2px 5% 2px 5%"}},r.a.createElement("h3",null,"Log In"),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),x(!0),u.signInWithEmailAndPassword(U,V).catch(function(e){alert(e.message)}).then(function(e){e.user.emailVerified||(u.signOut(),alert("Please verify your email first"))}).catch(function(e){}).then(function(){x(!1),B()})},className:"form",autoComplete:"off"},r.a.createElement(v.a,{required:!0,value:U,onChange:function(e){return q(e.target.value)},margin:"normal",size:"medium",type:"email",id:"standard-basic",label:"Email"}),r.a.createElement(v.a,{required:!0,value:V,onChange:function(e){return M(e.target.value)},margin:"normal",size:"medium",type:"password",id:"standard-basic",label:"Password"}),r.a.createElement(h.a,{type:"submit",mt:"30px",color:"primary"},"Log In"))))))))))},N=(t(96),t(145));var C=function(e){var a=e.postid,t=e.current_user,i=e.username,o=e.image,l=e.caption,m=Object(n.useState)([]),u=Object(c.a)(m,2),p=u[0],f=u[1],b=Object(n.useState)(""),g=Object(c.a)(b,2),E=g[0],h=g[1];return Object(n.useEffect)(function(){var e;return a&&(e=d.collection("posts").doc(a).collection("comments").orderBy("timestamp","desc").onSnapshot(function(e){f(e.docs.map(function(e){return{id:e.id,data:e.data()}}))})),function(){e()}},[a]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"post"},r.a.createElement("div",{className:"post_user"},r.a.createElement(N.a,{alt:i,src:"/broken-image.jpg"}),r.a.createElement("h3",{className:"username"},i)),r.a.createElement("img",{className:"post_img",src:o,alt:"post_image"}),r.a.createElement("p",{className:"post_caption"},l),r.a.createElement("div",{className:"post_comments"},r.a.createElement("p",null,"View all ",p.length," Comments"),p.map(function(e){var a=e.id,t=e.data;return r.a.createElement("p",{key:a,className:"comment"},r.a.createElement("b",null,t.username),r.a.createElement("span",null,t.text))})),t&&r.a.createElement("div",{className:"comment_box"},r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),d.collection("posts").doc(a).collection("comments").add({text:E,username:t.displayName,timestamp:s.a.firestore.FieldValue.serverTimestamp()}),h("")},className:"comment_form",autoComplete:"off"},r.a.createElement("input",{value:E,onChange:function(e){return h(e.target.value)},className:"input_comment",type:"text",required:!0,placeholder:"post a comment"}),r.a.createElement("button",{className:"post_comment",type:"submit"},"Post")))))},S=t(140),k=t(61),x=t.n(k),_=t(62),B=t.n(_),I=t(141),P=t(63),z=t.n(P),A=t(144),T=(t(97),Object(f.a)(function(e){var a;return{modal:{display:"flex",alignItems:"center",justifyContent:"center"},paper:(a={backgroundColor:e.palette.background.paper,boxShadow:e.shadows[5],padding:e.spacing(2,0,3),outline:"none",width:"30%"},Object(l.a)(a,e.breakpoints.down("sm"),{width:"60%"}),Object(l.a)(a,e.breakpoints.down("xs"),{width:"90%"}),a)}}));var F=function(e){var a=e.username,t=T(),i=Object(n.useState)(!1),o=Object(c.a)(i,2),l=o[0],m=o[1],u=Object(n.useState)(!1),f=Object(c.a)(u,2),j=f[0],O=f[1],w=Object(n.useState)(""),N=Object(c.a)(w,2),C=N[0],k=N[1],_=Object(n.useState)(null),P=Object(c.a)(_,2),F=P[0],U=P[1],q=Object(n.useState)(0),D=Object(c.a)(q,2),L=D[0],V=D[1],M=function(){m(!1)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(S.a,{onClick:function(){m(!0)},className:"upload",color:"primary","aria-label":"add"},r.a.createElement(x.a,null)),r.a.createElement("div",{className:"SignUp"},r.a.createElement(b.a,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",className:t.modal,open:l,onClose:M,closeAfterTransition:!0,maxwidth:"lg",BackdropComponent:g.a,BackdropProps:{timeout:500}},r.a.createElement(E.a,{in:l},r.a.createElement("div",{className:t.paper},L>0&&r.a.createElement(y.a,{style:{marginBottom:"15px",width:"100%",marginTop:"-18px",backgroundColor:"white"},variant:"determinate",value:L}),r.a.createElement("div",{style:{padding:"2px 4% 2px 4%"}},r.a.createElement("h3",null,"Upload Post"),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),p.ref("images/".concat(F.name)).put(F).on("state_changed",function(e){var a=Math.round(e.bytesTransferred/e.totalBytes*100);V(a)},function(e){alert(e.message)},function(){p.ref("images").child(F.name).getDownloadURL().then(function(e){d.collection("posts").add({timestamp:s.a.firestore.FieldValue.serverTimestamp(),caption:C,image:e,username:a})}).then(function(){k(""),U(null),M(),V(0)})})},className:"form",autoComplete:"off"},r.a.createElement("div",null,r.a.createElement("input",{accept:"image/*",id:"icon-button-file",type:"file",required:!0,style:{display:"none"},onChange:function(e){e.target.files[0]&&U(e.target.files[0])}}),r.a.createElement("label",{htmlFor:"icon-button-file"},r.a.createElement(I.a,{color:"primary","aria-label":"upload picture",component:"span",size:"medium",justify:"center"},r.a.createElement(B.a,{className:"camera"})))),r.a.createElement(v.a,{margin:"normal",id:"outlined-multiline-static",label:"Caption",multiline:!0,rows:6,variant:"outlined",vlaue:C,onChange:function(e){return k(e.target.value)}}),r.a.createElement(h.a,{variant:"contained",color:"primary",startIcon:r.a.createElement(z.a,null),type:"submit",size:"small",style:{width:"120px",marginTop:"10px"},onClick:function(){null===F&&O(!0)}},"Publish"))))))),r.a.createElement(A.a,{anchorOrigin:{vertical:"top",horizontal:"right"},open:j,onClose:function(){O(!1)},message:"PLease select an image",key:"topright"}))};t(99);var U=function(){var e=Object(n.useState)([]),a=Object(c.a)(e,2),t=a[0],i=a[1],o=Object(n.useState)(null),l=Object(c.a)(o,2),m=l[0],s=l[1];return Object(n.useEffect)(function(){d.collection("posts").orderBy("timestamp","desc").onSnapshot(function(e){i(e.docs.map(function(e){return{id:e.id,data:e.data()}}))})},[]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"app"},r.a.createElement(w,{user:m,setuser:s}),m?r.a.createElement(F,{username:m.displayName}):r.a.createElement("div",null),t.map(function(e){var a=e.id,t=e.data;return r.a.createElement(C,{key:a,current_user:m,postid:a,username:t.username,image:t.image,caption:t.caption})})))};o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(U,null)),document.getElementById("root"))},76:function(e,a,t){e.exports=t(100)},81:function(e,a,t){},82:function(e,a,t){},96:function(e,a,t){},97:function(e,a,t){},99:function(e,a,t){}},[[76,1,2]]]);
//# sourceMappingURL=main.2d09e638.chunk.js.map