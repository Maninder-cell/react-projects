(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{105:function(e,a,t){e.exports=t(134)},110:function(e,a,t){},111:function(e,a,t){},112:function(e,a,t){},113:function(e,a,t){},128:function(e,a,t){},132:function(e,a,t){},133:function(e,a,t){},134:function(e,a,t){"use strict";t.r(a);var n=t(0),c=t.n(n),l=t(11),r=t.n(l),o=(t(110),t(16)),i=(t(111),t(112),t(179)),m=t(188),s=t(190),u=t(172),d=t(180),p=t(181),E=t(192),f=t(85),h=t.n(f),b=t(175),g=t(135),v=t(178),y=t(177),O=t(51),j=(t(113),t(44)),N=t(47),S=t.n(N),k=S.a.initializeApp({apiKey:"AIzaSyCboXix97BlhhAuSiXzVOviM7VG3aeJKiQ",authDomain:"boxchat-2ee7e.firebaseapp.com",databaseURL:"https://boxchat-2ee7e.firebaseio.com",projectId:"boxchat-2ee7e",storageBucket:"boxchat-2ee7e.appspot.com",messagingSenderId:"61223648796",appId:"1:61223648796:web:ce8833a9d2928bae7da9d9",measurementId:"G-ZHGQPJ3S8K"}).firestore(),C=S.a.auth(),w=new S.a.auth.GoogleAuthProvider,_=k,x=Object(u.a)(function(e){return{root:{width:"100%",backgroundColor:e.palette.background.paper,"&:hover":{backgroundColor:"#f5f5f5"}},inline:{display:"inline"}}});var L=function(e){var a=e.id,t=e.name,l=x(),r=Object(n.useState)([]),i=Object(o.a)(r,2),m=i[0],s=i[1];return Object(n.useEffect)(function(){_.collection("rooms").doc(a).collection("messages").orderBy("timestamp","desc").onSnapshot(function(e){return s(e.docs.map(function(e){return e.data()}))})},[]),c.a.createElement(j.b,{style:{textDecoration:"none"},to:"/rooms/".concat(a)},c.a.createElement("div",{className:"rooms"},c.a.createElement(b.a,{className:l.root},c.a.createElement(g.a,{alignItems:"flex-start"},c.a.createElement(y.a,null,c.a.createElement(E.a,{alt:t,src:"https://api.adorable.io/avatars/285/abott@".concat(t,".png")})),c.a.createElement(v.a,{className:"room_name",primary:t,secondary:c.a.createElement(c.a.Fragment,null,c.a.createElement(O.a,{component:"span",variant:"body2",className:l.inline,color:"textPrimary"},m[0]&&m[0].username)," ".concat(m[0]?"\u2014"+m[0].text:""))})))))},T=t(189),R=t(86),B=t.n(R),U=t(91),I=t(183),G=t(193),A=t(187),D=t(185),V=t(186),M=t(184),P=t(182),z=Object(n.createContext)(),W=function(e){var a=e.reducer,t=e.initialState,l=e.children;return c.a.createElement(z.Provider,{value:Object(n.useReducer)(a,t)},l)},J=function(){return Object(n.useContext)(z)},q=t(74),F={SET_USER:"SET_USER",LOG_OUT:"LOG_OUT"},K=function(e,a){switch(a.type){case F.LOG_OUT:return Object(q.a)({},e,{user:void 0});case F.SET_USER:return Object(q.a)({},e,{user:a.user});default:return e}},Q=Object(u.a)(function(e){return{av:{flexGrow:1}}});var X=function(){var e=J(),a=Object(o.a)(e,2),t=a[0].user,l=a[1],r=Object(n.useState)([]),u=Object(o.a)(r,2),f=u[0],b=u[1],g=Object(n.useState)([]),v=Object(o.a)(g,2),y=v[0],O=v[1],j=Object(n.useState)(null),N=Object(o.a)(j,2),S=N[0],k=N[1],w=Object(n.useState)(""),x=Object(o.a)(w,2),R=x[0],z=x[1];Object(n.useEffect)(function(){O(null!==S?f.filter(function(e){return e.data.name.toLowerCase().includes(S.toLowerCase())}):[])},[S]),Object(n.useEffect)(function(){var e=_.collection("rooms").onSnapshot(function(e){b(e.docs.map(function(e){return{id:e.id,data:e.data()}}))});return function(){e()}},[]);var W=Q(),q=c.a.useState(null),K=Object(o.a)(q,2),X=K[0],H=K[1],Z=c.a.useState(!1),Y=Object(o.a)(Z,2),$=Y[0],ee=Y[1],ae=Boolean(X),te=function(){ee(!1),H(null)};return c.a.createElement("div",{className:"sidebar"},c.a.createElement(i.a,{className:"lefthead",color:"default",position:"static"},c.a.createElement(d.a,null,c.a.createElement("div",{className:W.av},c.a.createElement(E.a,{className:"avatar",style:{backgroundColor:"skyblue"},alt:t.displayName,src:t.photoURL})),c.a.createElement(p.a,{"aria-label":"display more actions",edge:"end",color:"inherit",onClick:function(e){H(e.currentTarget)}},c.a.createElement(h.a,null)),c.a.createElement(U.a,{id:"long-menu",className:"menu",anchorEl:X,keepMounted:!0,open:ae,onClose:te,TransitionComponent:P.a},c.a.createElement(I.a,{key:"Create New Room",onClick:function(){H(null),ee(!0)}},"Create New Room"),c.a.createElement(I.a,{key:"Log Out",onClick:function(){C.signOut().then(function(){te(),l({type:F.LOG_OUT})}).catch(function(e){alert(e.message)})}},"Log Out")),c.a.createElement("div",{className:"dialog"},c.a.createElement(G.a,{open:$,onClose:te,"aria-labelledby":"form-dialog-title"},c.a.createElement(M.a,{id:"form-dialog-title"},"Create New Room"),c.a.createElement("form",{onSubmit:function(e){e.preventDefault(),_.collection("rooms").add({name:R}).then(function(){ee(!1)})},autoComplete:"off"},c.a.createElement(D.a,null,c.a.createElement(V.a,null,"Try to set a unique and small name"),c.a.createElement(s.a,{autoFocus:!0,margin:"dense",id:"name",label:"New Room",type:"text",fullWidth:!0,required:!0,onChange:function(e){return z(e.target.value)}})),c.a.createElement(A.a,null,c.a.createElement(m.a,{onClick:te,color:"primary"},"Cancel"),c.a.createElement(m.a,{type:"submit",color:"primary"},"Create"))))))),c.a.createElement("div",{className:"header_search"},c.a.createElement("form",{onSubmit:function(e){return e.preventDefault()},className:"form"},c.a.createElement(B.a,null),c.a.createElement("input",{className:"search",value:S,onChange:function(e){return k(e.target.value)},type:"text",placeholder:"search room"}))),c.a.createElement("div",{className:"app_rooms"},null===S?f.map(function(e,a){return a!==f.length-1?c.a.createElement("div",{key:e.id},c.a.createElement(L,{key:e.id,id:e.id,name:e.data.name}),c.a.createElement(T.a,{variant:"middle",component:"li"})):c.a.createElement("div",{key:e.id},c.a.createElement(L,{key:e.id,id:e.id,name:e.data.name}))}):y.map(function(e,a){return a!==y.length-1?c.a.createElement("div",{key:e.id},c.a.createElement(L,{key:e.id,id:e.id,name:e.data.name}),c.a.createElement(T.a,{variant:"middle",component:"li"})):c.a.createElement("div",{key:e.id},c.a.createElement(L,{key:e.id,id:e.id,name:e.data.name}))})))},H=(t(128),t(88)),Z=t.n(H),Y=t(15),$=(t(129),t(90)),ee=t(87),ae=t.n(ee),te=t(39);var ne=function(){var e=Object(Y.f)().roomid,a=Object(n.useState)(""),t=Object(o.a)(a,2),l=t[0],r=t[1],m=Object(n.useState)(""),s=Object(o.a)(m,2),u=s[0],f=s[1],h=Object(n.useState)([]),b=Object(o.a)(h,2),g=b[0],v=b[1],y=Object(n.useState)([]),j=Object(o.a)(y,2),N=j[0],k=j[1],C=J(),w=Object(o.a)(C,2),x=w[0].user,L=(w[1],Object(n.useRef)(null));Object(n.useEffect)(function(){L.current.scrollIntoView({behavior:"auto"})},[g]);var T=c.a.useState(null),R=Object(o.a)(T,2),B=R[0],I=R[1],G=Boolean(B);return Object(n.useEffect)(function(){0!==u.length?_.collection("rooms").doc(e).collection("typing").doc("check").set({name:x.displayName,email:x.email,typing:!0}):_.collection("rooms").doc(e).collection("typing").doc("check").set({name:x.displayName,email:x.email,typing:!1})},[u,e]),Object(n.useEffect)(function(){var a=_.collection("rooms").doc(e).collection("typing").onSnapshot(function(e){return k(e.docs.map(function(e){return{id:e.id,data:e.data()}}))});return function(){a()}},[e]),Object(n.useEffect)(function(){I(null),e&&_.collection("rooms").doc(e).onSnapshot(function(e){r(e.data().name)});var a=_.collection("rooms").doc(e).collection("messages").orderBy("timestamp","asc").onSnapshot(function(e){return v(e.docs.map(function(e){return{id:e.id,data:e.data()}}))});return function(){a()}},[e]),c.a.createElement("div",{className:"chat"},c.a.createElement("div",{className:"chat_header"},c.a.createElement(i.a,{color:"default",position:"static"},c.a.createElement(d.a,null,c.a.createElement(E.a,{className:"avatar",style:{backgroundColor:"skyblue"},alt:l,src:"https://api.adorable.io/avatars/285/abott@".concat(l,".png")}),c.a.createElement("div",{className:"chat_info"},c.a.createElement(O.a,{variant:"subtitle1",style:{marginLeft:"10px"}},l),g[g.length-1]&&g[g.length-1].data.timestamp?c.a.createElement(O.a,{variant:"caption",color:"textSecondary",style:{marginLeft:"10px"}},"Last Activity on"," ".concat(new Date(g[g.length-1].data.timestamp.toDate()).toLocaleString())):"")))),c.a.createElement("div",{className:"chat_body"},g.map(function(e){return c.a.createElement("div",{key:e.id,className:"chat_message ".concat(e.data.email===x.email&&"chat_reciever")},c.a.createElement("span",{className:"chat_name"},e.data.username),c.a.createElement("p",{className:"chat_data"},c.a.createElement("span",{className:"msg"},e.data.text),c.a.createElement("span",{className:"chat_time"},e.data.timestamp&&new Date(e.data.timestamp.toDate()).toLocaleString())))}),c.a.createElement("div",{className:"typing ".concat(N[0]&&N[0].data.typing&&"margin")},N.map(function(e){if(e.data.typing&&e.data.email!==x.email)return c.a.createElement("span",{className:"tf",key:e.id},"".concat(e.data.name," is typing ...."))})),c.a.createElement("div",{ref:L})),c.a.createElement("div",{className:"chat_footer"},c.a.createElement(te.BrowserView,null,c.a.createElement("div",{className:"emoji"},c.a.createElement(U.a,{id:"long-menu",anchorEl:B,keepMounted:!0,open:G,className:"emoji_menu",onClose:function(){I(null)}},c.a.createElement($.a,{set:"google",title:"",emojiTooltip:!0,theme:"light",onSelect:function(e){f(u+e.native)}})))),c.a.createElement(i.a,{color:"default",position:"static"},c.a.createElement(d.a,null,c.a.createElement("form",{onSubmit:function(a){a.preventDefault(),_.collection("rooms").doc(e).collection("messages").add({text:u,username:x.displayName,email:x.email,timestamp:S.a.firestore.FieldValue.serverTimestamp()}).then(function(){return f("")})},autoComplete:"off",className:"chat_form"},c.a.createElement(te.BrowserView,null,c.a.createElement(p.a,{edge:"end",color:"primary",size:"medium",className:"emoji_picker",onClick:function(e){I(e.currentTarget)}},c.a.createElement(ae.a,null))),c.a.createElement("input",{className:"input",value:u,onChange:function(e){return f(e.target.value)},type:"text",placeholder:"Type a message ...",required:!0}),c.a.createElement(p.a,{"aria-label":"Send",edge:"end",color:"primary",type:"submit",size:"medium"},c.a.createElement(Z.a,null)))))))},ce=(t(132),t(136));var le=function(){return c.a.createElement("div",{className:"simple"},c.a.createElement(ce.a,{elevation:3},c.a.createElement("div",{className:"simple_data"},c.a.createElement("img",{alt:"Logo",src:"https://img.icons8.com/color/480/000000/chat.png"}),c.a.createElement("h2",null,"Chat With Random People's"))))},re=t(89);t(133);var oe=function(){var e=J(),a=Object(o.a)(e,2);Object(re.a)(a[0]);var t=a[1];return c.a.createElement("div",{className:"login"},c.a.createElement(ce.a,{className:"paper",elevation:3},c.a.createElement("div",{className:"paper_data"},c.a.createElement("img",{alt:"Logo",src:"https://img.icons8.com/color/480/000000/chat.png"}),c.a.createElement("h2",null,"Welcome in BreadCrumb"),c.a.createElement(m.a,{onClick:function(){te.isMobile?C.signInWithRedirect(w).then(function(e){t({type:F.SET_USER,user:e.user})}).catch(function(e){return alert(e.message)}):C.signInWithPopup(w).then(function(e){t({type:F.SET_USER,user:e.user})}).catch(function(e){return alert(e.message)})},variant:"outlined",color:"secondary"},"Sign In with Google"))))};var ie=function(){var e=J(),a=Object(o.a)(e,2),t=a[0].user,l=a[1];return Object(n.useEffect)(function(){var e=C.onAuthStateChanged(function(e){e&&l({type:F.SET_USER,user:e})});return function(){e()}},[t]),c.a.createElement("div",{className:"App"},c.a.createElement(te.BrowserView,null,t?c.a.createElement("div",{className:"AppBody"},c.a.createElement(j.a,null,c.a.createElement(X,null),c.a.createElement(Y.c,null,c.a.createElement(Y.a,{path:"/rooms/:roomid"},c.a.createElement(ne,null)),c.a.createElement(Y.a,{path:"/"},c.a.createElement(le,null))))):c.a.createElement(oe,null)),c.a.createElement(te.MobileView,null,t?c.a.createElement("div",{className:"AppBody"},c.a.createElement(j.a,null,c.a.createElement(Y.c,null,c.a.createElement(Y.a,{path:"/rooms/:roomid"},c.a.createElement(ne,null)),c.a.createElement(Y.a,{path:"/"},c.a.createElement(X,null))))):c.a.createElement(oe,null)))};r.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(W,{initialState:{user:null},reducer:K},c.a.createElement(ie,null))),document.getElementById("root"))}},[[105,1,2]]]);
//# sourceMappingURL=main.c7092fe6.chunk.js.map